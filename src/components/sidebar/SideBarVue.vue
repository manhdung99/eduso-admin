<template>
  <div class="flex my-7">
    <div class="avatar-wrapper">
      <img src="../../assets/image/avatar.jpg" alt="avatar" />
    </div>
    <div class="border-l border-white pl-5">
      <p class="text-white text-xl">Lê Thành Trung</p>
      <p class="text-grey text-lg">Vị trí: NXB</p>
    </div>
  </div>
  <div class="text-lg">
    <a-menu
      v-model:openKeys="openKeys"
      v-model:selectedKeys="selectedKeys"
      style="width: 290px"
      :mode="mode"
      :theme="theme"
    >
      <router-link to="/">
        <a-menu-item key="quanlykhosach">
          <template #icon>
            <svg
              class="mr-5"
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M13.3198 2.19514C9.58552 -0.281565 5.0185 -0.686076 0.975106 1.10174C0.386176 1.36214 0 1.99265 0 2.6938V19.8773C0 21.0284 1.05168 21.8154 2.01849 21.3879C5.32961 19.9239 9.06953 20.2552 12.1275 22.2833L13.6412 23.2873C13.7567 23.3638 13.8801 23.3973 14 23.395C14.1199 23.3973 14.2434 23.3638 14.3588 23.2873L15.8725 22.2833C18.9305 20.2552 22.6704 19.9239 25.9815 21.3879C26.9483 21.8154 28 21.0284 28 19.8773V2.6938C28 1.99265 27.6138 1.36214 27.0249 1.10174C22.9815 -0.686076 18.4145 -0.281565 14.6802 2.19514L14 2.64628L13.3198 2.19514ZM15 5.71646C15 5.10597 14.5523 4.61107 14 4.61107C13.4477 4.61107 13 5.10597 13 5.71646V19.7181C13 20.3286 13.4477 20.8235 14 20.8235C14.5523 20.8235 15 20.3286 15 19.7181V5.71646Z"
              />
              <path
                d="M1.63312 24.2019C4.33159 22.4619 7.6684 22.4619 10.3669 24.2019L11.8166 25.1367C13.1658 26.0067 14.8342 26.0067 16.1834 25.1367L17.6331 24.2019C20.3316 22.4619 23.6684 22.4619 26.3669 24.2019L26.5039 24.2903C26.9809 24.5979 27.1421 25.2747 26.8638 25.8021C26.5855 26.3294 25.9732 26.5075 25.4961 26.1999L25.3591 26.1116C23.2834 24.7731 20.7166 24.7731 18.6409 26.1116L17.1912 27.0463C15.2192 28.3179 12.7808 28.3179 10.8088 27.0463L9.35914 26.1116C7.28339 24.7731 4.71661 24.7731 2.64086 26.1116L2.50387 26.1999C2.02682 26.5075 1.4145 26.3294 1.13622 25.8021C0.857941 25.2747 1.01908 24.5979 1.49613 24.2903L1.63312 24.2019Z"
              />
            </svg>
          </template>
          <span class="pl-5"> Quản lý kho sách </span>
        </a-menu-item>
      </router-link>
      <router-link to="/quanlydoanhthu">
        <a-menu-item key="quanlydoanhthu">
          <template #icon>
            <svg
              class="mr-5"
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13.1251 3.20307C13.1251 3.06704 13.0085 2.95968 12.8732 2.97335C7.28133 3.53801 2.91675 8.25935 2.91675 14.0001C2.91675 20.1213 7.87893 25.0834 14.0001 25.0834C17.0762 25.0834 19.8599 23.8297 21.8674 21.8069C21.9633 21.7102 21.9527 21.5524 21.8468 21.4668L13.4501 14.6806C13.2445 14.5145 13.1251 14.2644 13.1251 14.0001V3.20307Z"
              />
              <path
                d="M22.9478 20.1065C23.0536 20.192 23.21 20.1694 23.2844 20.0555C24.2283 18.611 24.8445 16.9325 25.0269 15.1264C25.0405 14.9911 24.9331 14.8751 24.7971 14.8751H17.1347C16.9147 14.8751 16.817 15.1516 16.988 15.2899L22.9478 20.1065Z"
              />
              <path
                d="M24.7971 13.1251C24.9331 13.1251 25.0405 13.0086 25.0268 12.8733C24.4996 7.6519 20.3483 3.50056 15.1269 2.97334C14.9916 2.95968 14.8751 3.06704 14.8751 3.20307V12.7751C14.8751 12.9684 15.0318 13.1251 15.2251 13.1251H24.7971Z"
              />
            </svg>
          </template>
          <span class="pl-5"> Quản lý doanh thu </span>
        </a-menu-item>
      </router-link>
      <router-link to="/quanlytheodonvi">
        <a-menu-item key="quanlytheodonvi">
          <template #icon>
            <svg
              class="mr-5"
              width="28"
              height="28"
              viewBox="0 0 20 23"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M7.37492 8.50008C7.37492 7.05033 8.55017 5.87508 9.99992 5.87508C11.4497 5.87508 12.6249 7.05033 12.6249 8.50008C12.6249 9.94983 11.4497 11.1251 9.99992 11.1251C8.55017 11.1251 7.37492 9.94983 7.37492 8.50008Z"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M9.81095 0.916748C6.07486 0.916748 2.96333 3.78235 2.65641 7.50582C2.49142 9.50749 3.10972 11.4951 4.38109 13.0499L8.57502 18.179C9.31147 19.0796 10.6884 19.0797 11.4248 18.179L15.6188 13.0499C16.8901 11.4951 17.5084 9.50749 17.3434 7.50582C17.0365 3.78235 13.925 0.916748 10.1889 0.916748H9.81095ZM9.99992 4.12508C7.58367 4.12508 5.62492 6.08384 5.62492 8.50008C5.62492 10.9163 7.58367 12.8751 9.99992 12.8751C12.4162 12.8751 14.3749 10.9163 14.3749 8.50008C14.3749 6.08384 12.4162 4.12508 9.99992 4.12508Z"
              />
              <path
                d="M4.5579 15.8841C4.99013 16.1002 5.16533 16.6258 4.94921 17.0581L3.24903 20.4584H16.7508L15.0506 17.0581C14.8345 16.6258 15.0097 16.1002 15.4419 15.8841C15.8742 15.668 16.3998 15.8432 16.6159 16.2754L18.9492 20.9421C19.0848 21.2133 19.0703 21.5355 18.9109 21.7934C18.7515 22.0514 18.4698 22.2084 18.1666 22.2084H1.83325C1.53 22.2084 1.24836 22.0514 1.08893 21.7934C0.929503 21.5355 0.915009 21.2133 1.05063 20.9421L3.38396 16.2754C3.60008 15.8432 4.12567 15.668 4.5579 15.8841Z"
              />
            </svg>
          </template>
          <span class="pl-5"> Quản lý theo đơn vị </span>
        </a-menu-item>
      </router-link>
      <router-link to="/quanlytaikhoan">
        <a-menu-item key="quanlytaikhoan">
          <template #icon>
            <svg
              class="mr-5"
              width="28"
              height="28"
              viewBox="0 0 26 26"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.20823 12.9999C9.20823 10.9058 10.9058 9.20824 12.9999 9.20824C15.094 9.20824 16.7916 10.9058 16.7916 12.9999C16.7916 15.094 15.094 16.7916 12.9999 16.7916C10.9058 16.7916 9.20823 15.094 9.20823 12.9999Z"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.3707 1.14484C12.7147 0.788959 13.2851 0.788959 13.6291 1.14484L16.6301 4.24991H20.8749C21.3582 4.24991 21.7499 4.64166 21.7499 5.12491V9.3697L24.855 12.3707C25.2109 12.7147 25.2109 13.2851 24.855 13.6291L21.7499 16.6301V20.8749C21.7499 21.3582 21.3582 21.7499 20.8749 21.7499H16.6301L13.6291 24.855C13.2851 25.2109 12.7147 25.2109 12.3707 24.855L9.36969 21.7499H5.12491C4.64166 21.7499 4.24991 21.3582 4.24991 20.8749V16.6301L1.14484 13.6291C0.78896 13.2851 0.788959 12.7147 1.14484 12.3707L4.24991 9.36969V5.12491C4.24991 4.64166 4.64166 4.24991 5.12491 4.24991H9.36969L12.3707 1.14484ZM12.9999 7.45824C9.93932 7.45824 7.45823 9.93933 7.45823 12.9999C7.45823 16.0605 9.93932 18.5416 12.9999 18.5416C16.0605 18.5416 18.5416 16.0605 18.5416 12.9999C18.5416 9.93933 16.0605 7.45824 12.9999 7.45824Z"
              />
            </svg>
          </template>
          <span class="pl-5"> Quản lý tài khoản </span>
        </a-menu-item>
      </router-link>
      <a-menu-item>
        <template #icon>
          <svg
            class="mr-5"
            width="28"
            height="28"
            viewBox="0 0 28 28"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M13.1249 22.1666C13.1249 21.6833 13.5167 21.2916 13.9999 21.2916H20.9999C21.161 21.2916 21.2916 21.161 21.2916 20.9999L21.2916 6.99992C21.2916 6.83884 21.161 6.70825 20.9999 6.70825L13.9999 6.70825C13.5167 6.70825 13.1249 6.3165 13.1249 5.83325C13.1249 5.35 13.5167 4.95825 13.9999 4.95825H20.9999C22.1275 4.95825 23.0416 5.87234 23.0416 6.99992V20.9999C23.0416 22.1275 22.1275 23.0416 20.9999 23.0416H13.9999C13.5167 23.0416 13.1249 22.6498 13.1249 22.1666Z"
            />
            <path
              d="M18.2135 15.301C18.2135 15.9453 17.6911 16.4677 17.0468 16.4677H11.3815C11.3547 16.8823 11.3212 17.2967 11.281 17.7105L11.2464 18.0666C11.1901 18.6455 10.5754 18.9922 10.0508 18.7409C7.91823 17.7188 5.98765 16.3203 4.35191 14.6124L4.31696 14.5759C4.00535 14.2506 4.00535 13.7375 4.31696 13.4121L4.35192 13.3756C5.98765 11.6678 7.91823 10.2692 10.0508 9.24721C10.5754 8.99581 11.1901 9.34254 11.2464 9.92149L11.281 10.2776C11.3212 10.6914 11.3547 11.1057 11.3815 11.5204L17.0468 11.5204C17.6911 11.5204 18.2135 12.0427 18.2135 12.6871V15.301Z"
            />
          </svg>
        </template>
        <span @click="updateLogoutModalStatus(true)" class="pl-5">
          Đăng xuất
        </span>
      </a-menu-item>
    </a-menu>
  </div>
  <logoutModalVue />
</template>
<script lang="ts">
import { defineComponent, reactive, toRefs } from "vue";
import type { MenuMode, MenuTheme } from "ant-design-vue";
import logoutModalVue from "../modal/logoutModal.vue";
import { useModalStore } from "../../stores/modalStore";

export default defineComponent({
  name: "SideBar",
  setup() {
    const state = reactive({
      mode: "inline" as MenuMode,
      theme: "light" as MenuTheme,
      selectedKeys: ["quanlykhosach"],
      openKeys: ["sub1"],
    });
    const modal = useModalStore();
    const { updateLogoutModalStatus } = modal;
    const handlePageReload = () => {
      let urlArray = window.location.href.split("/");
      let newArray = [urlArray[urlArray.length - 1]];
      state.selectedKeys = newArray;
    };
    // Handle even load page
    window.addEventListener("load", handlePageReload);

    return {
      ...toRefs(state),
      updateLogoutModalStatus,
    };
  },
  components: {
    logoutModalVue,
  },
});
</script>
